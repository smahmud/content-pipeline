# Release v0.8.6 - Enrich Command Separate Output Files

**Release Date:** February 19, 2026

## Overview

This release enhances the `enrich` command with separate output files per enrichment type, improving reliability when using multiple enrichment flags. Previously, a failure in one enrichment type would lose all work. Now each type is saved independently.

## What's New

### Separate Output Files (Default)
Each enrichment type now creates its own output file:
- `--summarize` → `<input>-summary.json`
- `--tag` → `<input>-tags.json`
- `--chapterize` → `<input>-chapters.json`
- `--highlight` → `<input>-highlights.json`

### New CLI Options
- `--combine` - Merge all enrichments into single file (legacy behavior)
- `--output-dir` - Specify output directory for generated files

### Auto-loading Environment Variables
The CLI now automatically loads `.env.dev` or `.env` files for API keys.

## Usage Examples

### Separate Files (New Default)
```bash
# Creates transcript-summary.json AND transcript-tags.json
content-pipeline enrich --input transcript.json --summarize --tag
```

### Combined File (Legacy Behavior)
```bash
# Creates single transcript-enriched.json
content-pipeline enrich --input transcript.json --summarize --tag --combine
```

### With Output Directory
```bash
content-pipeline enrich --input transcript.json --summarize --tag --output-dir ./enriched/
```

## Migration Notes

### Breaking Changes
- Single enrichment type now creates type-specific filename (e.g., `-summary.json` instead of `-enriched.json`)
- `--output` flag requires `--combine` when using multiple enrichment types

### For Existing Scripts
- Scripts expecting `<input>-enriched.json` should add `--combine` flag
- Scripts using single enrichment type will see filename change

## Technical Details

### New Schema: IndividualEnrichment
Each separate file uses the new `IndividualEnrichment` schema:
```json
{
  "enrichment_version": "v1",
  "enrichment_type": "summary",
  "metadata": { ... },
  "data": { ... }
}
```

### Files Changed
- `cli/enrich.py` - New flags and separate/combined mode logic
- `cli/__init__.py` - Auto-load dotenv files
- `pipeline/enrichment/schemas/individual.py` - New schema
- `pipeline/enrichment/schemas/__init__.py` - Export new schema

## Related Documentation
- [CLI Commands Reference](../cli-commands.md)
- [CHANGELOG](../../CHANGELOG.md)
