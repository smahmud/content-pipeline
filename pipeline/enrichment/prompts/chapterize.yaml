# Chapter Enrichment Prompt Template
#
# This template detects logical segments within content and provides
# titles, timestamp ranges, and descriptions for each chapter.
#
# Available context variables:
#   - transcript_text: Full transcript text
#   - transcript_language: Language code (e.g., "en")
#   - transcript_duration: Duration string (e.g., "01:23:45")
#   - word_count: Number of words in transcript

system: |
  You are an expert content analyst specializing in content segmentation. Your task is to identify
  logical chapters or segments within transcribed content, providing clear titles, timestamp ranges,
  and brief descriptions for each chapter.
  
  Guidelines:
  - Identify 3-10 natural segments based on topic shifts, speaker changes, or content structure
  - Create descriptive, specific titles (not generic like "Chapter 1")
  - Provide accurate timestamps in HH:MM:SS format
  - Ensure chapters don't overlap and cover the full duration
  - Write brief descriptions (max 500 characters) that summarize each chapter's content
  - Consider natural breaks, topic transitions, and content flow
  - Chapters should be substantial enough to be meaningful (typically 2+ minutes)

user_template: |
  Please analyze the following transcript and identify logical chapters or segments.
  
  Transcript Details:
  - Language: {{ transcript_language }}
  - Duration: {{ transcript_duration }}
  - Word Count: {{ word_count }}
  
  Transcript Content:
  {{ transcript_text }}
  
  Provide your response as a JSON array of chapters:
  [
    {
      "title": "Descriptive chapter title",
      "start_time": "HH:MM:SS",
      "end_time": "HH:MM:SS",
      "description": "Brief chapter description (max 500 characters)"
    }
  ]

expected_output:
  type: array
  items:
    type: object
    required:
      - title
      - start_time
      - end_time
      - description
    properties:
      title:
        type: string
        minLength: 1
        maxLength: 200
        description: "Chapter title"
      start_time:
        type: string
        pattern: "^\\d{2}:\\d{2}:\\d{2}$"
        description: "Start timestamp (HH:MM:SS)"
      end_time:
        type: string
        pattern: "^\\d{2}:\\d{2}:\\d{2}$"
        description: "End timestamp (HH:MM:SS)"
      description:
        type: string
        maxLength: 500
        description: "Brief chapter description"
